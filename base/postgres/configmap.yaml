apiVersion: v1
kind: ConfigMap
metadata:
  name: init-scripts
data:
  # Base extensions setup - application-specific init scripts should be added via overlay patches
  00-extensions.sql: |
    -- ParadeDB auto-loads pg_search and pgvector, but we create them for compatibility
    CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
    CREATE EXTENSION IF NOT EXISTS "vector";

    -- Utility function to update updated_at timestamp
    CREATE OR REPLACE FUNCTION update_updated_at_column()
    RETURNS TRIGGER AS $$
    BEGIN
        NEW.updated_at = NOW();
        RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;
